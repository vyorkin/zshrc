# vim: set syntax=zsh:

if [[ `uname` == "Darwin" ]]; then
  export ZPLUG_HOME=/usr/local/opt/zplug
elif [[ `uname -r` == *"ARCH" ]]; then
  export ZPLUG_HOME="$HOME/.zplug"
fi

# for NixOS we set ZPLUG_HOME in the pkg options
# so there is no need to do it here

. $ZPLUG_HOME/init.zsh

# required for other async zsh plugins
zplug "mafredri/zsh-async", from:github

# dditional completion definitions for Zsh
zplug "zsh-users/zsh-completions"

# ZSH port of Fish history search (up arrow)
zplug "zsh-users/zsh-history-substring-search"

# bind P and N for emacs mode
bindkey -M emacs '^P' history-substring-search-up
bindkey -M emacs '^N' history-substring-search-down

zplug "zsh-users/zsh-autosuggestions"

bindkey '^T' autosuggest-toggle

zplug "zsh-users/zsh-syntax-highlighting", defer:2

GEOMETRY_PROMPT_PLUGINS=(virtualenv exec_time git +rustup)
PROMPT_GEOMETRY_COLORIZE_SYMBOL=false
zplug "geometry-zsh/geometry"

# zplug "cusxio/delta-prompt", use:delta.zsh
# zplug "halfo/lambda-mod-zsh-theme", as:theme
# zplug "eendroroy/alien"
# zplug "eendroroy/alien-minimal"
# zplug "marszall87/lambda-pure"
# zplug "sindresorhus/pure", use:pure.zsh, from:github, as:theme
# zplug "simnalamburt/shellder", as:theme

# fix garish, unreadable green and yellow node segment colours
# POWERLEVEL9K_NODE_VERSION_BACKGROUND="red"
# POWERLEVEL9K_NODE_VERSION_FOREGROUND="white"
# POWERLEVEL9K_LEFT_PROMPT_ELEMENTS=(dir vcs)
# POWERLEVEL9K_RIGHT_PROMPT_ELEMENTS=(status $TOOL_VERSION)
# POWERLEVEL9K_SHORTEN_DIR_LENGTH=1
# POWERLEVEL9K_SHORTEN_DELIMITER=""
# POWERLEVEL9K_SHORTEN_STRATEGY="truncate_from_right"
# zplug "bhilburn/powerlevel9k", use:powerlevel9k.zsh-theme

# zplug "k4rthik/git-cal", as:command, defer:3
# zplug "tysonwolker/iterm-tab-colors"
# zplug "Seinh/git-prune", defer:3
# zplug "uvaes/fzf-marks", defer:3
# zplug "AlexisBRENON/oh-my-zsh-reminder", defer:3
# zplug "unixorn/tumult.plugin.zsh", defer:3
# zplug "dbz/zsh-kubernetes", defer:3
# zplug "dracula/zsh", as:theme
# zplug "iam4x/zsh-iterm-touchbar"
# zplug "Russell91/sshrc", from:github, as:command, use:"sshrc", defer:3
# zplug "bobsoppe/zsh-ssh-agent", use:ssh-agent.zsh, from:github
# zplug "gko/ssh-connect", use:ssh-connect.sh
# zplug "denolfe/zsh-travis", defer:3
# zplug "lukechilds/zsh-better-npm-completion", defer:2

export ZSH_PLUGINS_ALIAS_TIPS_TEXT="> "
zplug "djui/alias-tips", defer:3
export EMOJI_CLI_KEYBIND="^v"
zplug "b4b4r07/emoji-cli", defer:3
zplug "rupa/z", use:z.sh, defer:1
zplug "zplug/zplug", hook-build: "zplug --self-manage"

# install plugins if there are plugins that have not been installed
if ! zplug check --verbose; then
  printf "install plugins? [y/N]: "
  if read -q; then
    echo; zplug install
  fi
fi

# source plugins and add commands to $PATH
zplug load
